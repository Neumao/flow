model User {
    id                      String               @id @default(uuid()) @db.Uuid
    email                   String               @unique
    firstName               String?
    lastName                String?
    userName                String?
    password                String
    isActive                Boolean              @default(true)
    isVerified              Boolean              @default(false)
    role                    Role                 @default(USER)
    authToken               String?
    authTokenExpiry         DateTime?
    tokenVersion            Int                  @default(0) // For token invalidation
    resetPasswordToken      String?
    resetPasswordExpires    DateTime?
    passwordLastChanged     DateTime?
    emailVerificationToken  String?
    emailVerificationExpiry DateTime?
    failedLoginAttempts     Int                  @default(0)
    lastLoginAt             DateTime?
    lastActiveAt            DateTime?
    createdAt               DateTime             @default(now())
    updatedAt               DateTime             @updatedAt
    deletedAt               DateTime?
    apiRequests             ApiRequest[]
    workItems               WorkItem[]
    workItemAuditEvents     WorkItemAuditEvent[]

    @@map("users")
}

enum Role {
    USER
    MODERATOR
    ADMIN
    SYSADMIN
}
